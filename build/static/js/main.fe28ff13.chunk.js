(this.webpackJsonpreact_renderer=this.webpackJsonpreact_renderer||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(17),c=n.n(r),o=n(18),a=n(3),s=n(2),i=n(19),u=n(0),d=function(e){var t=e.addPerson,n=e.newName,r=e.handleNewName,c=e.newNumber,o=e.handleNewNumber;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Add a Contact:"}),Object(u.jsxs)("form",{onSubmit:t,children:[Object(u.jsx)("table",{children:Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Name: "}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{value:n,onChange:r})})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:"Number:\xa0"}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{value:c,onChange:o})})]})]})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})]})},j=n(4),l=n.n(j),b="http://localhost:3001/api/persons",h={get:function(){return l.a.get(b).then((function(e){return e.data}))},post:function(e){return l.a.post(b,e).then((function(e){return e.data}))},put:function(e){return l.a.put("".concat(b,"/").concat(e.id),e).then((function(e){return e.data}))},del:function(e){return l.a.delete("".concat(b,"/").concat(e))}},f=function(e){var t=e.person,n=e.delContact;e.setNotification;return Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:[t.name,"\u2003"]}),Object(u.jsxs)("td",{children:[t.number,"\u2003"]}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:n(t.id,t.name),children:"Delete"})})]})},O=function(e){var t=e.persons,n=e.setPersons,r=e.setNotification,c=e.setError,o=function(e,o){return function(){window.confirm("Are you sure you want to delete ".concat(o,"?"))&&(h.del(e).catch((function(e){c(!0),r("Information of ".concat(o," has already been removed from server")),setTimeout((function(){r(null),c(!1)}),4e3)})),n(t.filter((function(t){return t.id!==e}))))}};return 0===t.length?Object(u.jsx)("p",{children:"No Contacts Found"}):Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("strong",{children:"Names:"})}),Object(u.jsx)("td",{children:Object(u.jsx)("strong",{children:"Numbers:"})})]})}),Object(u.jsx)("tbody",{children:t.map((function(e){return Object(u.jsx)(f,{person:e,delContact:o},e.id)}))})]})},m=function(e){var t=e.searchStr,n=e.handleSearch;return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:["Search by name:\u2002",Object(u.jsx)("input",{value:t,onChange:n})]}),Object(u.jsx)("br",{})]})},x=function(e){var t=e.persons,n=e.setPersons,r=e.searchStr,c=e.handleSearch,o=e.setNotification,a=e.setError;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Contact List:"}),Object(u.jsx)(m,{searchStr:r,handleSearch:c}),Object(u.jsx)(O,{persons:t,setPersons:n,setNotification:o,setError:a})]})},p=function(e){var t=e.message,n=e.isError;if(null===t)return null;var r={color:"blue",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,width:300};return n&&(r.color="red"),Object(u.jsx)("div",{style:r,className:"notification",children:t})},v=function(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)(null),j=Object(a.a)(c,2),l=j[0],b=j[1],f=Object(s.useState)(!1),O=Object(a.a)(f,2),m=O[0],v=O[1];Object(s.useEffect)((function(){h.get().then((function(e){r(e)}))}),[]);var g=Object(s.useState)(""),N=Object(a.a)(g,2),w=N[0],S=N[1],y=Object(s.useState)(""),C=Object(a.a)(y,2),E=C[0],P=C[1],k=Object(s.useState)(""),T=Object(a.a)(k,2),L=T[0],A=T[1],B=n;return L.length>0&&(B=n.filter((function(e){return e.name.toLowerCase().includes(L.toLowerCase())}))),Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phone Book"}),Object(u.jsx)(p,{message:l,isError:m}),Object(u.jsx)(d,{addPerson:function(e){e.preventDefault();var t=w.trim();if(0!==t.length){var c,a={name:t=t.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})).join(" "),number:E,id:Object(i.a)()},s=Object(o.a)(n);try{var u=function(){var e=c.value;if(e.name===t)return window.confirm("".concat(w," is already added to phonebook. Do you want to replace the number?"))?(a.id=e.id,h.put(a).then((function(t){r(n.map((function(e){return e.id!==t.id?e:t}))),b("Updated ".concat(e.name,"'s number")),setTimeout((function(){return b(null)}),4e3)})).catch((function(e){return alert("There was an error contacting the database")})),{v:void 0}):(S(""),P(""),{v:void 0})};for(s.s();!(c=s.n()).done;){var d=u();if("object"===typeof d)return d.v}}catch(j){s.e(j)}finally{s.f()}h.post(a).then((function(e){r(n.concat(e)),P(""),S(""),b("Added ".concat(e.name)),setTimeout((function(){return b(null)}),5e3)})).catch((function(e){console.log(e.response.data.error),v(!0),b(e.response.data.error),setTimeout((function(){b(null),v(!1)}),6e3)}))}else S("")},newName:w,handleNewName:function(e){return S(e.target.value)},newNumber:E,handleNewNumber:function(e){return P(e.target.value)}}),Object(u.jsx)(x,{persons:B,setPersons:r,searchStr:L,handleSearch:function(e){return A(e.target.value)},setNotification:b,setError:v})]})};n(43);c.a.render(Object(u.jsx)(v,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.fe28ff13.chunk.js.map